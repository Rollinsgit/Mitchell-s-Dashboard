<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mitchell's GED Training</title>
    <style>
        :root { --math: #e3f2fd; --rla: #ffebee; --sci: #e8f5e9; --ss: #fff3e0; }
        body { font-family: -apple-system, sans-serif; margin: 0; padding-bottom: 50px; transition: background 0.5s ease; background: var(--math); }
        .status-header { background: #fff; padding: 20px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; }
        .progress-outer { background: #eee; border-radius: 10px; height: 18px; margin: 10px auto; max-width: 400px; overflow: hidden; }
        .bar { background: #2ecc71; height: 100%; width: 0%; transition: 0.5s; }
        .sync-badge { font-size: 0.7rem; color: #27ae60; font-weight: bold; text-transform: uppercase; margin-top: 5px; }
        .button-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 15px; max-width: 600px; margin: 0 auto; }
        .sub-btn { padding: 15px; border: none; border-radius: 12px; color: white; font-weight: bold; cursor: pointer; }
        .btn-math { background: #1e88e5; } .btn-rla { background: #e53935; } .btn-sci { background: #43a047; } .btn-ss { background: #fb8c00; }
        .container { max-width: 600px; margin: 0 auto; padding: 0 15px; }
        .content { display: none; } .content.active { display: block; }
        .lesson-card { background: white; margin-bottom: 12px; padding: 15px; border-radius: 15px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .lesson-info { display: flex; align-items: center; gap: 15px; flex-grow: 1; cursor: pointer; }
        
        /* Unified Checkbox Fix */
        input[type="checkbox"] { 
            appearance: none; -webkit-appearance: none; width: 35px; height: 35px; 
            border: 3px solid #ddd; border-radius: 8px; background: #fff; cursor: pointer; 
            position: relative; flex-shrink: 0; margin: 0;
        }
        input[type="checkbox"]:checked { background: #2ecc71; border-color: #27ae60; }
        input[type="checkbox"]:checked::after { content: '‚úî'; position: absolute; color: white; font-size: 22px; left: 6px; top: -1px; }

        .lesson-card span { font-weight: bold; color: #333; font-size: 1rem; }
        .learn-link { background: #f0f0f0; border: none; padding: 10px; border-radius: 10px; font-size: 1.3rem; cursor: pointer; }
    </style>
</head>
<body id="body-bg">

<div class="status-header">
    <h2 id="header-title" style="margin:0">Mitchell's MATH Training</h2>
    <div class="progress-outer"><div id="p-bar" class="bar"></div></div>
    <div id="stat-text" style="font-weight:bold; color:#666">0% Complete</div>
    <div class="sync-badge">‚òÅÔ∏è Cloud Sync Active</div>
</div>

<div class="button-grid">
    <button class="sub-btn btn-math" onclick="switchSubject('math')">MATH</button>
    <button class="sub-btn btn-rla" onclick="switchSubject('rla')">RLA</button>
    <button class="sub-btn btn-sci" onclick="switchSubject('sci')">SCIENCE</button>
    <button class="sub-btn btn-ss" onclick="switchSubject('ss')">SOCIAL S.</button>
</div>

<div class="container">
    <div id="math-list" class="content active"></div>
    <div id="rla-list" class="content"></div>
    <div id="sci-list" class="content"></div>
    <div id="ss-list" class="content"></div>
</div>

<script>
    const FIREBASE_URL = 'https://schooling-dashboard-default-rtdb.firebaseio.com/mitchell';
    const dataSet = {
        math: ["Whole Numbers", "Fractions: Adding & Subtracting", "Decimals", "Multiplication", "Division", "Factors and Multiples", "Using Denominators and Converting Fractions", "Like and Unlike Terms", "Order of Operations", "Factoring and Solving Equations", "Absolute Value", "Multiplying and Dividing Fractions", "Exponents", "Exponent Rules", "Squares & Square Roots", "Cubes, Cube Roots, and Volume", "Functions and Slopes", "Rates and Unit Rates", "Proportions and Ratios", "Review Multi‚Äìstep Word Problems and Inequalities", "Test Prep & Practice Quiz", "Congratulations"],
        rla: ["Vocabulary Questions", "Analyzing Text", "Identifying Themes and Main Ideas", "Parts Of The Text", "Expressing and Influencing Opinions", "Sequence and Cause and Effect", "Evidence and Explanation", "Verb Tenses", "Avoiding Sentence Run-ons and Fragments", "Capitalization", "Punctuation", "Getting Ready to Write", "Writing the Parts of an Essay", "Using Transition Words and Phrases", "Points of View", "Final Practice Quiz", "Congratulations!"],
        sci: ["The Scientific Method", "Using Data", "Using Statistics", "Understanding Cells", "Human Biology", "DNA, Genes, and Heredity", "Evolution", "Ecology", "Ecosystems", "Geology", "Earth‚Äôs Atmosphere", "Earth in the Solar System", "Atoms and Molecules", "Changes and Reactions", "Symbols and Chemical Equations", "Motion and forces", "Energy and Work", "Units and Formulas", "Summary and Practice Test", "Congratulations"],
        ss: ["Reading Resources, Charts and Graphs", "The Early History of America", "The American Revolution", "The Civil War", "The Progressive Era and World War 1", "The Great Depression and World War 2", "The American Civil Rights Movement", "The Cold War and the Modern World", "Ancient Civilizations", "Human Migration", "National Borders", "People and the Environment", "The United States Government", "Citizenship", "Types of Government", "Political Parties and Public Policy", "Revolutions that Changed the Economy", "Taxes", "Final Test and Practice Quiz", "Congratulations"]
    };

    let activeSub = 'math';

    function init() {
        Object.keys(dataSet).forEach(sub => {
            const list = document.getElementById(sub + '-list');
            dataSet[sub].forEach((text, i) => {
                const id = `m_${sub}_${i}`;
                const card = document.createElement('div');
                card.className = 'lesson-card';
                card.innerHTML = `
                    <div class="lesson-info" onclick="toggleCheckbox('${id}')">
                        <input type="checkbox" id="${id}" onclick="event.stopPropagation(); saveToCloud();">
                        <span>Round ${i+1}: ${text}</span>
                    </div>
                    <button class="learn-link" onclick="copyAndOpen('GED ${sub.toUpperCase()} ${text}')">üìñ</button>`;
                list.appendChild(card);
            });
        });
        loadFromCloud();
        setInterval(loadFromCloud, 5000); // Polling for your "Coach View"
    }

    function toggleCheckbox(id) {
        const cb = document.getElementById(id);
        cb.checked = !cb.checked;
        saveToCloud();
    }

    function saveToCloud() {
        const data = {};
        document.querySelectorAll('input[type="checkbox"]').forEach(cb => { data[cb.id] = cb.checked; });
        fetch(`${FIREBASE_URL}/checks.json`, {
            method: 'PUT',
            body: JSON.stringify(data)
        }).then(() => updateUI());
    }

    function loadFromCloud() {
        fetch(`${FIREBASE_URL}/checks.json`)
            .then(r => r.json())
            .then(data => {
                if (data) {
                    Object.entries(data).forEach(([id, checked]) => {
                        const el = document.getElementById(id);
                        if (el) el.checked = checked;
                    });
                }
                updateUI();
            });
    }

    function switchSubject(sub) {
        activeSub = sub;
        document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
        document.getElementById(sub + '-list').classList.add('active');
        document.getElementById('body-bg').style.background = `var(--${sub})`;
        document.getElementById('header-title').innerText = `Mitchell's ${sub.toUpperCase()} Training`;
        updateUI();
    }

    function updateUI() {
        const currentList = document.getElementById(activeSub + '-list');
        const total = currentList.querySelectorAll('input').length;
        const checked = currentList.querySelectorAll('input:checked').length;
        const pct = Math.round((checked / total) * 100) || 0;
        document.getElementById('p-bar').style.width = pct + '%';
        document.getElementById('stat-text').innerText = `${checked}/${total} Rounds (${pct}%)`;
    }

    function copyAndOpen(phrase) {
        const el = document.createElement('textarea'); el.value = phrase; document.body.appendChild(el);
        el.select(); document.execCommand('copy'); document.body.removeChild(el);
        window.open("https://learning.google.com/experiments/learn-about", "_blank");
    }

    init();
</script>
</body>
</html>
